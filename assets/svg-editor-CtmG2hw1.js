import"./modulepreload-polyfill-B5Qt9EMX.js";document.addEventListener("DOMContentLoaded",()=>{const y=document.getElementById("upload"),c=document.getElementById("svg-text"),p=document.getElementById("preview-btn"),f=document.getElementById("convert-btn"),s=document.getElementById("color-picker"),a=document.getElementById("scale-input"),E=document.getElementById("scale-value"),d=document.getElementById("svg-preview"),i=document.getElementById("base64-output"),u=document.getElementById("copy-result");let r=null;function v(t){if(d.innerHTML="",!t||!t.trim())return;const e=new DOMParser().parseFromString(t,"image/svg+xml").querySelector("svg");if(e)e.style.maxWidth="100%",e.style.maxHeight="100%",e.style.transformOrigin="center",e.style.fill=s.value,e.style.stroke=s.value,e.style.transform=`scale(${a.value})`,d.appendChild(e),r=e;else{const o=document.createElement("p");o.className="text-red-400 text-sm",o.textContent="Ошибка: Некорректный SVG.",d.appendChild(o)}}y.addEventListener("change",t=>{const n=t.target.files[0];if(n){const l=new FileReader;l.onload=e=>{c.value=e.target.result,v(e.target.result)},l.readAsText(n)}}),p.addEventListener("click",()=>{v(c.value)}),s.addEventListener("input",()=>{r&&(r.style.fill=s.value,r.style.stroke=s.value)}),a.addEventListener("input",()=>{E.textContent=`${parseFloat(a.value).toFixed(1)}x`,r&&(r.style.transform=`scale(${a.value})`)}),f.addEventListener("click",()=>{const t=c.value.trim();if(!t){alert("Введите или загрузите SVG.");return}try{const n=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),l=URL.createObjectURL(n);fetch(l).then(e=>e.arrayBuffer()).then(e=>{const o=new Uint8Array(e);let g="";for(let m=0;m<o.length;m++)g+=String.fromCharCode(o[m]);const x=btoa(g);i.value=`data:image/svg+xml;base64,${x}`}).catch(e=>{console.error("Ошибка конвертации:",e),alert("Ошибка при создании Base64.")}).finally(()=>{URL.revokeObjectURL(l)})}catch(n){console.error("Ошибка обработки SVG:",n),alert("Не удалось обработать SVG.")}}),u.addEventListener("click",()=>{i.value&&(i.select(),document.execCommand("copy"),u.textContent="✅ Скопировано!",setTimeout(()=>{u.textContent="📋 Копировать"},2e3))})});
