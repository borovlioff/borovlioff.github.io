import"./modulepreload-polyfill-B5Qt9EMX.js";let s=JSON.parse(localStorage.getItem("questions"))||["Кто твоя первая любовь?","Когда ты первый раз поцеловал человека другого пола?","Какова твоя самая смелая фантазия в сексе?","Изменял ли ты своему партнёру?","Чего ты больше всего боишься в жизни?","С кем бы ты хотел остаться на необитаемом острове?","Предавал ли ты своего друга?","От чего бы ты никогда не отказался?","Какая у тебя самая вредная привычка?"],l=JSON.parse(localStorage.getItem("dare"))||["Сесть на колени к соседу справа и попрыгай на нем.","Станцевать в одиночку.","Спеть забавную песенку.","Прочитай отрывок из любого стихотворения.","Съешь ломтик лимона и не скривись при этом (если нет лимона — можно кетчуп или щепотку соли)","Вычисти туфли соседу слева.","Сделай планку на руках и продержись в течение минуты.","Станцуй ламбаду на стуле.","Изобрази петушка, хлопая крыльями и кукарекая.","Протри пыль во всей комнате."],a=JSON.parse(localStorage.getItem("partnes"))||[];const S=document.getElementById("truthButton"),k=document.getElementById("dareButton"),u=document.getElementById("output"),m=document.getElementById("patner"),p=document.getElementById("resetButton"),B=document.getElementById("usernameInput"),C=document.getElementById("addUserButton"),g=document.getElementById("userList"),E=document.getElementById("questionInput"),O=document.getElementById("addQuestionButton"),I=document.getElementById("dareInput"),P=document.getElementById("addDareButton"),b=document.getElementById("exportDataButton"),N=document.getElementById("importFile"),i=document.getElementById("controlPanel"),y=document.getElementById("openPanelButton"),q=document.getElementById("closePanelButton");function J(){i.classList.remove("translate-x-full")}function L(){i.classList.add("translate-x-full")}function f(t){const o=Math.floor(Math.random()*t.length);return t[o]}function h(){return a.length>0?f(a):"Кто-то"}function c(){localStorage.setItem("partnes",JSON.stringify(a)),localStorage.setItem("questions",JSON.stringify(s)),localStorage.setItem("dare",JSON.stringify(l))}function v(){g&&(g.innerHTML="",a.forEach((t,o)=>{const n=document.createElement("li");n.className="flex items-center justify-between p-2 bg-gray-800 rounded-lg text-sm";const r=document.createElement("span");r.textContent=t,n.appendChild(r);const e=document.createElement("button");e.textContent="✕",e.className="ml-2 w-6 h-6 flex items-center justify-center text-xs bg-red-600 hover:bg-red-700 rounded",e.addEventListener("click",()=>{a.splice(o,1),c(),v(),x()}),n.appendChild(e),g.appendChild(n)}))}function d(){v(),x()}function x(){p&&p.classList.toggle("hidden",a.length===0&&s.length===0&&l.length===0)}document.addEventListener("DOMContentLoaded",()=>{d(),y?.addEventListener("click",J),q?.addEventListener("click",L),document.addEventListener("click",t=>{const o=i.contains(t.target),n=y.contains(t.target);!o&&!n&&!i.classList.contains("translate-x-full")&&L()}),C?.addEventListener("click",()=>{const t=B.value.trim();t?(a.push(t),B.value="",c(),d()):alert("Введите имя участника!")}),O?.addEventListener("click",()=>{const t=E.value.trim();t?(s.push(t),E.value="",c(),alert("Вопрос добавлен!")):alert("Введите вопрос!")}),P?.addEventListener("click",()=>{const t=I.value.trim();t?(l.push(t),I.value="",c(),alert("Действие добавлено!")):alert("Введите действие!")}),S?.addEventListener("click",()=>{if(s.length===0){alert("Нет ни одного вопроса!");return}m.textContent=h(),u.textContent=f(s)}),k?.addEventListener("click",()=>{if(l.length===0){alert("Нет ни одного действия!");return}m.textContent=h(),u.textContent=f(l)}),b?.addEventListener("click",()=>{const t={partnes:a,questions:s,dare:l},o=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(o),r=document.createElement("a");r.href=n,r.download=`truth-or-dare-data-${new Date().toISOString().slice(0,10)}.json`,r.click(),URL.revokeObjectURL(n)}),N?.addEventListener("change",t=>{const o=t.target.files[0];if(!o)return;const n=new FileReader;n.onload=function(r){try{const e=JSON.parse(r.target.result);Array.isArray(e.partnes)&&(a=e.partnes),Array.isArray(e.questions)&&(s=e.questions),Array.isArray(e.dare)&&(l=e.dare),c(),d(),alert("✅ Данные успешно импортированы!")}catch(e){alert("❌ Ошибка при импорте: файл повреждён или имеет неверный формат."),console.error(e)}},n.readAsText(o),t.target.value=""}),p?.addEventListener("click",()=>{confirm("Удалить ВСЁ: участников, вопросы и действия?")&&(a=[],s=[],l=[],c(),d(),m.textContent="",u.textContent="Нажмите «Правда» или «Действие»")})});
