import"./modulepreload-polyfill-B5Qt9EMX.js";const l=document.getElementById("wordDisplay"),u=document.getElementById("start"),g=document.getElementById("pause"),C=document.getElementById("reset"),r=document.getElementById("speedControl"),p=document.getElementById("speedValue"),E=document.getElementById("startSpeed"),L=document.getElementById("endSpeed"),i=document.getElementById("textInput"),w=document.getElementById("fileInput"),k=document.getElementById("clearText"),R=document.getElementById("toggleSettings"),W=document.getElementById("settingsPanel");let n=[],t=0,s=200,c=null,d=!1;document.addEventListener("DOMContentLoaded",()=>{const e=localStorage.getItem("words"),a=localStorage.getItem("currentWordIndex"),o=localStorage.getItem("readingSpeed");e&&(n=JSON.parse(e),i.value=n.join(" ")),a&&(t=parseInt(a,10)),o?(s=parseInt(o,10),r.value=S(s),p.textContent=S(s)):(r.value=300,p.textContent=300,x()),E.value=localStorage.getItem("startSpeed")||300,L.value=localStorage.getItem("endSpeed")||600});u.addEventListener("click",B);g.addEventListener("click",I);C.addEventListener("click",P);l.addEventListener("click",()=>d?I():B());r.addEventListener("input",()=>{p.textContent=r.value,x()});E.addEventListener("input",M);L.addEventListener("input",O);i.addEventListener("input",()=>{n=i.value.trim().split(/\s+/).filter(e=>e),t=0,v()});w.addEventListener("change",D);k.addEventListener("click",F);R.addEventListener("click",()=>{W.classList.toggle("hidden")});function x(){s=6e4/parseInt(r.value,10)}function S(e){return Math.round(6e4/e)}function B(){if(n.length===0){alert("Добавьте текст для чтения.");return}d||(d=!0,u.classList.add("hidden"),g.classList.remove("hidden"),clearInterval(c),c=setInterval(()=>{t<n.length?(l.textContent=n[t],t++,m()):T()},s))}function I(){d&&(clearInterval(c),d=!1,g.classList.add("hidden"),u.classList.remove("hidden"),m())}function T(){clearInterval(c),d=!1,g.classList.add("hidden"),u.classList.remove("hidden"),t=0,l.textContent="Чтение завершено",setTimeout(()=>{d||(l.textContent='Нажмите "Старт"')},1500)}function P(){I(),t=0,l.textContent='Нажмите "Старт"',m()}function D(e){const a=e.target.files[0];if(!a)return;const o=new FileReader;o.onload=function(y){const f=y.target.result;i.value=f,n=f.trim().split(/\s+/).filter(h=>h),t=0,v()},o.readAsText(a)}function F(){i.value="",n=[],t=0,v(),m()}function v(){localStorage.setItem("words",JSON.stringify(n))}function m(){localStorage.setItem("currentWordIndex",t),localStorage.setItem("readingSpeed",s)}function M(e){localStorage.setItem("startSpeed",e.target.value)}function O(e){localStorage.setItem("endSpeed",e.target.value)}
