import './styles.css';
let questions =  JSON.parse(localStorage.getItem('questions')) ||[
    "Кто твоя первая любовь?",
    "Когда ты первый раз поцеловал человека другого пола?",
    "Какова твоя самая смелая фантазия в сексе?",
    "Изменял ли ты своему партнёру?",
    "Чего ты больше всего боишься в жизни?",
    "С кем бы ты хотел остаться на необитаемом острове?",
    "Предавал ли ты своего друга?",
    "От чего бы ты никогда не отказался?",
    "Какая у тебя самая вредная привычка?",
    "Кто твой самый лютый враг?",
    "Что бы ты отдал, если бы твоему другу или девушке грозила смертельная опасность? (Ответ «все» не принимается, нужен подробный ответ)",
    "Сколько ты зарабатываешь в месяц?",
    "Чем ты пожертвовал бы ради дружбы? (Пример из жизни)",
    "Какого вопроса ты боишься больше всего?",
    "Ты мог бы отдать все свои деньги на благотворительность?",
    "Смог бы ты пойти «по головам» ради достижения своей цели?",
    "Твое самое нелюбимое занятие?",
    "Любишь ли ты алкогольные напитки?",
    "Каковы твои вредные привычки?",
    "Кто в нашей компании тебя больше всего раздражает?",
    "Где бы ты хотел(а) провести свой медовый месяц?",
    "Можешь отбить партнера у лучшего друга?",
    "Что ты боишься потерять больше всего?",
    "Хотела бы ты отправиться в бесплатное кругосветное путешествие с мамой своего парня? (или со своим врагом)",
    "Чем бы ты предпочла заняться наедине с человеком слева",
    "Какой подарок ты считаешь самым худшим в своей жизни?",
    "Кого из присутствующих ты отказалась бы поцеловать?",
    "Чем бы ты смогла пожертвовать ради дружбы? (кроме ответа «всем», дать развернутый ответ)",
    "Смогла бы ты выйти замуж за человека, который старше тебя на 20 лет, но богат?",
    "Ты и твой друг влюблены в одного человека. Отойдешь ли ты в сторону ради дружбы?",
    "С кем ты мог бы отправиться в постель из присутствующих?",
    "Можешь ли ты сейчас полностью раздеться?",
    "Расскажи о своем первом сексуальном опыте.",
    "Носишь ли ты белье, предназначенное для другого пола?",
    "Нравятся ли тебе представители твоего пола?",
    "Смог бы ты выйти на улицу в нижнем белье?",
    "Сколько партнеров у тебя было за всю жизнь?",
    "Сколько партнеров было одновременно?",
    "Если бы у тебя украли все вещи, и ты мог бы выбрать только одну вещь, что бы это было?",
    "Какова твоя самая постыдная проделка в постели?",
    "Расскажи о твоей самой тайной интимной мечте.",
    "Нравятся ли тебе ролевые игры?",
    "Если бы тебя застали в постели с партнером друга, подруги, как бы ты себя повел?",
    "Смог бы ты зарабатывать телом, если бы у тебя вообще не было денег?",
    "Какой части своего тела ты стесняешься больше всего?",
    "Хотел бы ты сделать пластическую операцию, чтобы выглядеть лучше? Что бы ты в себе изменил?",
    "Каким было твое первое свидание?",
    "Ты когда-нибудь влюблялась в партнера своего друга?",
    "Ты сама приглашала парня на свидания? Какие обстоятельства тебя заставили это сделать?",
    "Опиши свой самый ужасный поцелуй?",
    "Как долго ты можешь стоять у зеркала, любуясь собой?",
    "Ты была безответно влюблена, в кого?",
    "С каким животным ты ассоциируешь себя в постели?",
    "Ты делала какие-то отвратительные поступки, за которые тебе до сих пор стыдно?",
    "Что тебя больше всего возбуждает в парнях?",
    "Была ли такая ситуация, когда ты пришла на свидание, а твой молодой человек — нет?",
    "Как ты относишься к фильму «Сумерки», нравится или нет?",
    "Представь, что у тебя есть возможность выйти замуж за телезвезду, кого ты выберешь?",
    "Есть человек, который в данный момент тебе нравится, какие чувства ты испытываешь к нему?",
    "Ты бы хотела сделать себе экстремальную прическу?",
    "Ты делала глупые поступки перед тем, кто тебе нравится? Тебе было неловко в тот момент?",
    "Что тебе больше всего нравится в себе, а что раздражает?",
    "Если бы у тебя была возможность поменять что-то в себе, то какую часть тела ты бы выбрала?",
    "С кем у тебя был первый поцелуй? Опиши свои чувства и впечатления.",
    "У тебя когда-то был поцелуй уже на первом свидании? Может, ты хотела даже чего-то большего?",
    "Назови 5 самых красивых и привлекательных парней из своего круга общения.",
    "Ты хотела бы детей? Сколько и когда?",
    "Есть такой человек, который вызывает у тебя только негативные эмоции, кто он?",
    "Ты года-либо влюблялась в брата своей подружки?",
    "Кто тебе больше нравится: накачанный парень, умник или хулиган?",
    "Что ты считаешь самым привлекательным и сексуальным в парне?",
    "Что по твоему мнению больше всего притягивает парней в девушках?",
    "Расскажи, что бы ты делала, если бы смогла поменяться телами на один день с парнем?",
    "У тебя есть мечта о том, кем ты хочешь работать?",
    "Представь, что тебя отправляют на необитаемый остров и тебе можно взять с собой только пять вещей. Что это будет?",
    "Как ты относишься к парням, которые ниже тебя ростом? Смогла бы с таким встречаться?",
    "Если ты узнаешь, что твоей лучшей подруге нравится твой парень, что будешь предпринимать?",
    "Что тебе во мне не нравится, что бы ты хотела поменять, если бы могла?",
    "Представь себе, что ты выиграла в лотерею путешествие в другую страну. Ты можешь взять с собой двух человек, кто бы это был?",
    "У тебя есть что-то такое, что раздражает в лучшей подруге, а ты не говоришь ей?",
    "Ты когда-то ошибалась адресатом и отправляла случайно смс-ку не тому человеку? Что в ней было написано?",
    "Ты бы хотел пойти на свидание с девушкой из этой компании, если да, то с кем?",
    "Ты когда-то изменял в отношениях? Чем это закончилось?",
    "Расскажи о своей первой любви, кто она?",
    "Представь, что у тебя есть возможность родиться снова, кем бы ты стал?",
    "Если ты узнаешь, что тебе осталось жить всего сутки, что бы ты сделал за это время?",
    "Вспомни свой первый поцелуй, как это было и с кем?",
    "У тебя есть какая-то мечта?",
    "Представь, что ты оказался на необитаемом острове. У тебя есть возможность взять с собой только одного человека, кто бы это был?",
    "Какой самый страшный и неуместный вопрос, который ты можешь услышать сегодня на игре?",
    "Ты бы хотел иметь собственного раба? Кто бы им стал из этой комнаты?",
    "Ты часто обманываешь девушек, о чем именно ты врешь?",
    "Если ты однажды станешь невидимым, что бы ты начал делать?",
    "Ты любишь шутить над кем-то? Расскажи о своей самой злой или неудачной шутке, за которую тебе потом было стыдно?",
    "Ты когда-то писал в бассейн или море?",
    "У тебя есть вредные привычки? Какие?",
    "Представь, что ты сейчас можешь получить что угодно. Какой вещью ты хотел бы обладать?",
    "Подсчитай, сколько тебе удалось заработать за весь год. Сколько получилось?",
    "Какой страх для тебя самый сильный?",
    "Когда-нибудь пользовался чужой зубной щеткой?",
    "Когда-нибудь был настолько пьян, что наутро отшибало память?",
    "Считаешь себя гибким человеком? В чем проявляется твоя гибкость?",
    "В каком возрасте у тебя впервые появились сексуальные мысли и что их побудило?",
    "Какую самую забавную/странную гримасу или позу делал перед зеркалом?",
    "У тебя рвалась одежда в самый неподходящий момент и в неподходящем месте?",
    "Назовешь самый странный сон, который тебе приснился?",
    "Тролил других в интернете или соцсетях?",
    "Что самого забавного и смешного с тобой случилось на публике?",
    "Что самое забавное или смешное ты сделал для привлечения женского внимания?",
    "Какую девушку, сидящую в этой комнате, считаешь самой привлекательной, желанной?",
    "Как бы ты добивался руки и сердца понравившейся тебе девушки?",
    "Пытался привлечь внимание девушки строя из себя задиристого, крутого парня?",
    "Какие дела вещи доставляют тебе удовольствие?",
    "Что ты никогда никому не говорил?",
    "Назовёшь самую плохую свою привычку?",
    "Какую из своих фотографий больше всего стесняешься?",
    "Кто тот человек, который знает о тебе больше всего?",
    "Какой стиль одежды предпочитаешь носить?",
    "Когда-нибудь списывал (пользоваться шпаргалками), чтобы сдать экзамен?",
    "Какие безумные выходки совершал(а), когда был(а) пьяным(ой)?",
    "Поддерживаешь отношения с бывшими одноклассниками или одногруппниками?",
    "Какой мультфильм или кино можешь пересматривать постоянно?",
    "Любишь бывать на вечеринках?",
    "Каким представляешь дом своей мечты?",
    "Кто из киногероев или артистов твой кумир?",
    "Твоя любимая спортивная команда?",
    "Какую самую неприятную шутку ты с кем-нибудь сыграл?",
    "Какой самый неподходящий комплимент сказал(а)?",
    "Какое событие для тебя оказалось самым неприятным сюрпризом?",
    "Какой момент был самым счастливым в твоей жизни?",
    "Считаешь себя ревнивым человеком или нет?",
    "Какую самую глупую выходку, (поступок) делал за деньги?",
    "Имеешь привычку разговаривать сам с собой?",
    "Когда-нибудь ходил в наручниках? По какой причине?",
    "Какая профессия тебе больше всего нравится?",
    "Какие самые большие травмы получал в детстве?",
    "Тебя кто-то ненавидит?",
    "Чем больше всего гордишься?",
    "Считаешь себя привлекательным парнем/девушкой или нет?",
    "Если встретишь на вечеринке свою бывшую девушку, которая попросит тебя провести её домой — проведёшь?",
    "Если случайно увидишь голую девушку, продолжишь на нее смотреть или отведешь взгляд?",
    "У кого из девушек сидящих здесь самая классная фигура?",
    "Нюхаешь свои носки или нижнее белье, чтобы проверить чистые они или нет?",
    "Стал бы встречаться одновременно с двумя, тремя девушками, зная, что все это сойдет тебе с рук?",
    "Кому из сидящих здесь девушек нужно улучшить свой внешний вид? Какие детали внешности им нужно изменить?",
    "С кем бы уехал отсюда на свидание? ",
    "Решился бы на смену пола за 10 000 000 евро?",
    "Обещал когда-нибудь какой-то девушке жениться, чтобы добиться от нее интимных отношений?",
    "Бросил бы свою девушку/парня за 1 000 000 евро?",
    "Что может оправдать неверность в отношениях?",
    "Как часто обманываешь свою девушку/парня?",
    "Какие наихудшие качества проявляет твоя девушка/парень?",
    "Разрывал отношения с девушкой/парнем перед самым праздником только, чтобы не покупать ей подарок?",
    "Тренировался целоваться с зеркалом?",
    "Поёшь в душе или сидя на унитазе?",
    "Какое самое запомнившееся приключение у тебя было с друзьями?",
    "Кому из друзей завидовал или завидуешь?",
    "Насколько ты готов рисковать ради друзей?",
    "Кого считаешь своим верным и лучшим другом?",
    "При каких условиях соврешь другу?",
    "Что ты украл у друга и почему это сделал?",
    "Какую работу порекомендуешь друзьям, а от какой предостережешь?",
    "Мог бы провести полгода без общения с друзьями?",
    "Какую информацию хотел бы скрыть от друзей?",
    "Друг флиртовал когда-нибудь с твоей девушкой/парнем? Какова была твоя реакция?",
    "Если останешься в одиночестве, как будешь проводить время?",
    "Что станешь делать, если узнаешь о завтрашнем конце света?",
    "У кого из всех присутствующих самые красивые глаза?",
    "С кем из знаменитых женщин хотел бы встречаться?",
    "С каким самым большим унижением ты сталкивался?",
    "Какие самые раздражающие вещи делают твои родители?",
    "Что больше всего тебя возмущает в отце?",
    "Что нужно делать парню, чтобы стать успешным?",
    "На кого из животных ты похож по характеру?",
    "Твое отношение к гомосексуализму и однополым бракам?",
    "Каким представляется тебе наихудший день жизни?",
    "Какой цвет соответствует твоему характеру?",
    "Какой стратегии придерживаешься, чтобы покорить сердце другого человека?",
    "Твои впечатления после первого поцелуя?",
    "В кого ты был тайно влюблён?",
    "На свидании с девушкой когда-то чувствовал себя неудобно? Из-за чего было это чувство?",
    "Из-за чего прекратил отношения с бывшым(ей)?",
    "Что самое смешное случилось с тобой на свидании?",
    "Какие эмоции у тебя были, когда впервые влюбился?",
    "Позволишь своей 2 половинке флиртовать с другими?",
    "Стоит ли с партнером обсуждать интимные вопросы?",
    "Встречался с девушкой/парнем, которая была намного старше тебя?",
    "Что тебя больше всего привлекло в твоей девушке?",
    "Продолжаешь еще испытывать чувства к своей первой любви?",
    "Какие три качества считаешь самыми ценными в отношениях?",
    "Что самое трудное в отношениях?",
    "Каким самым большим достоинством обладает твоя девушка/парень?",
    "Когда-нибудь прощал неверность?",
    "Что самое глупое ты сказал девушке, которая тебе нравится, после чего чувствовал себя идиотом?",
    "Когда-нибудь признался(ась) девушке/парню в любви, не испытывая к ней этих чувств?",
    "Какую информацию, которую ты просматривал в интернете, тебе хотелось бы скрыть?",
    "Когда-нибудь лгал во время игры, «Правда или действие»?",
    "На какие вопросы говорил неправду?",
    "Что сделаешь, если найдешь клад в лесу?",
    "Твои планы на следующие 10 лет жизни?",
    "Какую вещь хотел бы изобрести?",
    "Имея возможность родиться заново, где хотел бы появиться на свет и кем?",
    "Что стал бы делать на посту президента, чтобы улучшить жизнь в стране?",
    "Что станешь делать, имея возможность путешествовать во времени?",
    "Тебе больше нравится зима или лето?",
    "Как относишься к мужчинам нытикам?",
    "Кого бы спас из этой комнаты в случае стихийного бедствия при условии, что время позволяет спасти только одного человека?",
    "Парню простительны измены или нет? Обязана ли девушка его прощать?",
    "На что первое обращаешь внимание, когда смотришь на девушку/парня?",
    "Что самое неприятное ты сделал в общественном месте?",
    "Когда последний раз пел и танцевал в одиночестве?",
    "Какой самый долгий период ты не мылся? Почему?",
    "Какую самую необычную пищу ты ел?",
    "На кого из супергероев хочешь быть похожим? Почему?",
    "Каким был твой самый худший день жизни?",
    "Что самое худшее сделал в своей жизни?",
    "Обманывал родителей? Жалеешь об этом? Почему?",
    "Против кого из людей имеешь предубеждение?",
    "Чего больше всего боишься?",
    "Твое отношение к случайному сексу?",
    "Имеешь привычку грызть ногти?",
    "Издевался над кем-то в классе?",
    "Какой самый отвратительный напиток тебе приходилось пить?",
    "Что тебя лучше всего расслабляет?",
    "В каких случаях чувствуешь себя неуверенно?",
    "Ты принципиальный человек или готов идти на компромиссы?",
    "Когда-нибудь сомневался в своей сексуальной ориентации?",
    "Самая неловкая вещь, которую ты делала перед человеком, который тебе нравился?",
    "Когда-нибудь отбивал(а) партнера своего друга?",
    "Сразу ли ты понимаешь, что нравишься человеку? какие чувства испытываешь, когда убеждаешься в этом?",
    "Ты быстро привязываешься к людям?",
    "Сколько бокалов вина тебе нужно, чтобы почувствовать себя раскованно?",
    "Расскажи о ситуации в жизни, при воспоминании о которой тебе до сих пор стыдно.",
    "У тебя начинается паника перед выступлением на публике?",
    "Ты смотришь прохожим в глаза?",
    "Сколько раз ты покупал(а) тест на беременность?",
    "На что ты решался(лась) под алкоголем?",
    "С кем из этой комнаты, у вас был интим?",
    "Заключил бы брак ради денег?",
    "Какие бы качества ты хотела(а) приобрести?",
    "Часто видишь в людях плохое?",
    "Твои родители уделяли тебя достаточно внимания?",
    "Ты родился(ась) в полной семье?",
    "Как ты себя чувствуешь без денег?",
    "Кого бы ты здесь поцеловал?",
    "За кем последний раз тайком подглядывал?"
  ];

let dare = JSON.parse(localStorage.getItem('dare')) || [
    "Сесть на колени к соседу справа и попрыгай на нем.",
    "Станцевать в одиночку.",
    "Спеть забавную песенку.",
    "Прочитать отрывок из любого стихотворения.",
    "Съешь ломтик лимона и не скривись при этом ( у игрока не должно быть проблем с желудком. Если нет лимона, можно предложить острый перец, кетчуп, щепотку соли)",
    "Вычисти туфли соседу слева.",
    "Сделай планку на руках и продержись в течение минуты.",
    "Станцуй ламбаду на стуле.",
    "Изобрази петушка, хлопая крыльями и кукарекая.",
    "Протри пыль во всей комнате.",
    "Выйди на улицу и пригласи первого встречного в гости.",
    "Открой окно или дверь и громко прокричи, что ты любишь весь мир.",
    "Расскажи смешной анекдот.",
    "Выпей стакан воды залпом, не отрываясь.",
    "Обменяйся с соседом справа пятью элементами одежды (украшения не считаются).",
    "Присядь на корточки и пройди вдоль стола 5 раз.",
    "Прикинься нищим и попроси у каждого из присутствующих немного денег на пропитание. Цель: собрать хоть какой-то капитал.",
    "Стань «цыганкой» и предлагай всем позолотить ручку. Погадай первому, кто согласится.",
    "Вы знаменитый художник и должны нарисовать картину и продать ее за любые деньги присутствующим или прохожим на улице. На время выполнения можно приостановить игру или же продолжать без этого участника.",
    "Накормить трех участников из чайной ложечки с завязанными глазами.",
    "Поцелуй того, кто первым войдет в эту комнату.",
    "Пойди на кухню и найди там продукт (острый перец, горчицу, лук, чеснок) и съешь его.",
    "Иди на улицу и кричи как можно громче «мой парень сбежал, помогите».",
    "Когда ты захочешь в туалет, попроси на это разрешения у всех присутствующих.",
    "Пригласи на романтическое свидание первого, кто зайдет в комнату. Даже, если это будет девушка.",
    "Стань посреди комнаты и спой песню «я маленькая лошадка», пританцовывая при этом.",
    "Вспомни какой-то рекламный ролик и постарайся его спародировать.",
    "Возьми кетчуп, горчицу, майонез и другие приправы, все смешай и съешь это.",
    "Иди на улицу и первому, кого встретишь, признайся в любви.",
    "Вспомни пару строк из стихотворения, стань на стул и продекламируй их.",
    "Возьми у игрока слева любую вещь из одежды и надень ее на себя.",
    "Посади к себе на спину игрока справа от себя и покатай его по комнате.",
    "Представь, что ты Майкл Джексон и изобрази его знаменитую лунную походку.",
    "Иди на улицу и начни маршировать, при этом, пой какой-то гимн.",
    "Изобрази гориллу или шимпанзе и подражай им целую минуту.",
    "Выбери кого-то из компании и сделай на него пародию.",
    "Возьми шарик и надувай его до тех пор, пока он не лопнет.",
    "Напиши смс-ку со словами «я тебя люблю» и отправь всем контактам в своей телефонной книге.",
    "Пойди на улицу и познакомься с парнем, возьми у него номер телефона.",
    "Попроси у кого-то незнакомого денег в долг.",
    "Поцелуй того, кто первым сюда войдет, даже если это будет парень.",
    "Возьми веник или швабру, пойди к соседям и предложи им уборку.",
    "Выпей залпом литр воды.",
    "Съешь целый лимон так, чтобы ни разу не поморщиться.",
    "Попроси девушку из нашей компании сделать тебе макияж.",
    "Пойди на улицу и первому встречному предложи посидеть в засаде в кустах.",
    "Выбери любую лавочку, расстели на ней газету и громко спрашивай у прохожих, можно ли тебе здесь ночевать.",
    "Отыщи бездомную собаку и начни на нее гавкать.",
    "Выйди на улицу и проси у прохожих туалетную бумагу.",
    "Приготовить на всю компанию вкусные бутерброды/коктейли.",
    "Попроси у девушки из нашей компании лифчик и померяй его.",
    "Представь, что ты лягушка, прыгай и издавай похожие звуки.",
    "Спой песню «я шоколадный заяц», при этом танцуй и поглаживай свое тело.",
    "Встань на табуретку и скажи двадцать слов на тему секса очень громко.",
    "Возьми вилку и попытайся продать ее прохожим на улице как можно дороже.",
    "Позвони бывшей девушке и скажи, что ты все еще от нее без ума.",
    "Позвони маме и скажи, что тебя выгнали из школы/университета.",
    "Сними всю одежду, одень ее наизнанку и так проведи весь вечер.",
    "Найди на улице кота или собаку и громко признайся животному в любви.",
    "Попроси в кафе бесплатно чашку кофе или упроси кого-то, чтоб за тебя заплатили.",
    "От 0 до 10 баллов дай оценку с точки зрения интеллекта, красоты и симпатии человеку, сидящему от тебя через один стул справа.",
    "По десятибалльной шкале оцени себя с точки зрения красоты симпатии и интеллекта.",
    "Съешь несколько зубков чеснока и пол головки лука (если нет противопоказаний), после этого прочитай лекцию о пользе свежего дыхания.",
    "Придумай самый смешной вопрос девушке.",
    "Выступи с пятиминутной воодушевляющей речью на тему: «Почему я влюбился в свою девушку и за что продолжаю любить?»",
    "Напечатай закрытыми глазами любовное послание девушке.",
    "Покажи радость тренера футбольной команды, которая проиграла, /выиграла все игры турнира.",
    "5 минут копируй повадки гориллы. Придумай стих, где обязательными словами должны быть: оранжевый, лось, мартовский кот, окунь, лопух.",
    "Отжимайся от пола, пока не наступит твоя очередь выбирать правду или действие.",
    "Сделать рядом сидящей девушке макияж.",
    "Пройтись в женских туфлях на высоком каблуке.",
    "5 минут изображать из себя обиженного индюка.",
    "Завязанными за спиной руками сделать бутерброд и съесть его.",
    "Разговаривай с игроком, сидящим справа, словно с любимым домашним питомцем.",
    "Нарисуй лицо вокруг своего пупка.",
    "Нанести женскую маску для лица и просидеть 30 минут.",
    "150 раз подпрыгнуть на скакалке.",
    "Намазать пятки сырыми яичными желтками, надеть носки и сидеть так до конца игры.",
    "Заказать пиццу на дом голосом с кавказским акцентом.",
    "Выполнить 40 отжиманий менее чем за минуту.",
    "Накрасить губы человеку, сидящему от вас дальше всего.",
    "Нарисовать помадой на своем лице кролика без подглядывания в зеркало.",
    "10 минут играть роль самой заботливой мамочки.",
    "Выйти на улицу с собачим поводком, и спросить у трех девушек: «Вы не видели моего потерявшегося, любимого аллигатора?»",
    "Лизни человека справа.",
    "Поцелуй любого из участников.",
    "Выключи телефон на 10 мин."
  ];


let partnes = JSON.parse(localStorage.getItem('partnes')) || [];

// --- DOM-элементы ---
const truthButton = document.getElementById('truthButton');
const dareButton = document.getElementById('dareButton');
const output = document.getElementById('output');
const patner = document.getElementById('patner');
const resetButton = document.getElementById('resetButton');

const usernameInput = document.getElementById('usernameInput');
const addUserButton = document.getElementById('addUserButton');
const userList = document.getElementById('userList');

const questionInput = document.getElementById('questionInput');
const addQuestionButton = document.getElementById('addQuestionButton');

const dareInput = document.getElementById('dareInput');
const addDareButton = document.getElementById('addDareButton');

const exportDataButton = document.getElementById('exportDataButton');
const importFile = document.getElementById('importFile');

// --- Управление выдвижной панелью ---
const controlPanel = document.getElementById('controlPanel');
const openPanelButton = document.getElementById('openPanelButton');
const closePanelButton = document.getElementById('closePanelButton');

function openPanel() {
  controlPanel.classList.remove('translate-x-full');
}

function closePanel() {
  controlPanel.classList.add('translate-x-full');
}


// --- Вспомогательные функции ---
function getRandomElement(array) {
  const index = Math.floor(Math.random() * array.length);
  return array[index];
}

function getRandomPartne() {
  return partnes.length > 0 ? getRandomElement(partnes) : "Кто-то";
}

function saveData() {
  localStorage.setItem('partnes', JSON.stringify(partnes));
  localStorage.setItem('questions', JSON.stringify(questions));
  localStorage.setItem('dare', JSON.stringify(dare));
}

function updateParticipantList() {
  if (!userList) return;
  userList.innerHTML = '';
  partnes.forEach((name, index) => {
    const li = document.createElement('li');
    li.className = 'flex items-center justify-between p-2 bg-gray-800 rounded-lg text-sm';

    const span = document.createElement('span');
    span.textContent = name;
    li.appendChild(span);

    const deleteBtn = document.createElement('button');
    deleteBtn.textContent = '✕';
    deleteBtn.className = 'ml-2 w-6 h-6 flex items-center justify-center text-xs bg-red-600 hover:bg-red-700 rounded';
    deleteBtn.addEventListener('click', () => {
      partnes.splice(index, 1);
      saveData();
      updateParticipantList();
      toggleResetButton();
    });

    li.appendChild(deleteBtn);
    userList.appendChild(li);
  });
}

function updateUI() {
  updateParticipantList();
  toggleResetButton();
}

function toggleResetButton() {
  if (resetButton) {
    resetButton.classList.toggle('hidden', partnes.length === 0 && questions.length === 0 && dare.length === 0);
  }
}

// --- Привязка событий ---
document.addEventListener('DOMContentLoaded', () => {
  updateUI();




  // Открыть панель
openPanelButton?.addEventListener('click', openPanel);

// Закрыть панель
closePanelButton?.addEventListener('click', closePanel);

// Закрыть панель при клике вне её (на бэкдроп)
document.addEventListener('click', (e) => {
  const isClickInsidePanel = controlPanel.contains(e.target);
  const isClickOnOpenButton = openPanelButton.contains(e.target);

  if (!isClickInsidePanel && !isClickOnOpenButton && !controlPanel.classList.contains('translate-x-full')) {
    closePanel();
  }
});

  // --- Добавить участника ---
  addUserButton?.addEventListener('click', () => {
    const name = usernameInput.value.trim();
    if (name) {
      partnes.push(name);
      usernameInput.value = '';
      saveData();
      updateUI();
    } else {
      alert("Введите имя участника!");
    }
  });

  // --- Добавить вопрос ---
  addQuestionButton?.addEventListener('click', () => {
    const q = questionInput.value.trim();
    if (q) {
      questions.push(q);
      questionInput.value = '';
      saveData();
      alert("Вопрос добавлен!");
    } else {
      alert("Введите вопрос!");
    }
  });

  // --- Добавить действие ---
  addDareButton?.addEventListener('click', () => {
    const a = dareInput.value.trim();
    if (a) {
      dare.push(a);
      dareInput.value = '';
      saveData();
      alert("Действие добавлено!");
    } else {
      alert("Введите действие!");
    }
  });

  // --- Правда ---
  truthButton?.addEventListener('click', () => {
    if (questions.length === 0) {
      alert("Нет ни одного вопроса!");
      return;
    }
    patner.textContent = getRandomPartne();
    output.textContent = getRandomElement(questions);
  });

  // --- Действие ---
  dareButton?.addEventListener('click', () => {
    if (dare.length === 0) {
      alert("Нет ни одного действия!");
      return;
    }
    patner.textContent = getRandomPartne();
    output.textContent = getRandomElement(dare);
  });

  // --- Экспорт данных ---
  exportDataButton?.addEventListener('click', () => {
    const data = { partnes, questions, dare };
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `truth-or-dare-data-${new Date().toISOString().slice(0,10)}.json`;
    a.click();
    URL.revokeObjectURL(url);
  });

  // --- Импорт данных ---
  importFile?.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(event) {
      try {
        const imported = JSON.parse(event.target.result);
        if (Array.isArray(imported.partnes)) partnes = imported.partnes;
        if (Array.isArray(imported.questions)) questions = imported.questions;
        if (Array.isArray(imported.dare)) dare = imported.dare;

        saveData();
        updateUI();
        alert("✅ Данные успешно импортированы!");
      } catch (err) {
        alert("❌ Ошибка при импорте: файл повреждён или имеет неверный формат.");
        console.error(err);
      }
    };
    reader.readAsText(file);

    // Сбросить input, чтобы можно было перезагрузить тот же файл
    e.target.value = '';
  });

  // --- Сброс ---
  resetButton?.addEventListener('click', () => {
    if (confirm("Удалить ВСЁ: участников, вопросы и действия?")) {
      partnes = [];
      questions = [];
      dare = [];
      saveData();
      updateUI();
      patner.textContent = '';
      output.textContent = 'Нажмите «Правда» или «Действие»';
    }
  });
});